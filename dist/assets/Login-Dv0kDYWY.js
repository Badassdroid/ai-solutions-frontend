import{r as n,i as f,j as e}from"./index-DKBqM6Xc.js";import{a as x}from"./index-xsH4HHeE.js";const L=()=>{const[t,g]=n.useState(""),[o,m]=n.useState(""),[i,a]=n.useState(""),[c,l]=n.useState(!1),p=f(),h=async r=>{var d,u;if(r.preventDefault(),a(""),l(!0),!t||!o){a("Username and password are required"),l(!1);return}try{const s=await x.post("http://127.0.0.1:5000/api/login",{username:t,password:o});console.log("Login response:",s.data),s.data.token?(localStorage.setItem("token",s.data.token),localStorage.setItem("username",t),a("Login successful! Redirecting..."),p("/admin")):a("Login failed: No token received")}catch(s){console.error("Login error:",s),a(((u=(d=s.response)==null?void 0:d.data)==null?void 0:u.message)||"Login failed. Please check your credentials and try again.")}finally{l(!1)}};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-form-container",children:[e.jsx("h2",{children:"Login to Your Account"}),e.jsxs("form",{onSubmit:h,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{type:"text",id:"username",value:t,onChange:r=>g(r.target.value),placeholder:"Enter username",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{type:"password",id:"password",value:o,onChange:r=>m(r.target.value),placeholder:"Enter password",required:!0})]}),e.jsx("button",{type:"submit",disabled:c,children:c?"Logging in...":"Login"})]}),i&&e.jsx("div",{className:`message ${i.includes("successful")?"success":"error"}`,children:i})]})})};export{L as default};
